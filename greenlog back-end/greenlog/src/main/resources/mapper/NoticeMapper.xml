<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.NoticeMapper">
    <insert id="insert">
        INSERT INTO notice (notice_writer, notice_title, notice_contents, notice_type)
        VALUES (#{notice_writer}, #{notice_title}, #{notice_contents}, #{notice_type})
    </insert>
   <update id="update">
		update notice
		set notice_title= #{notice_title}, notice_contents=#{notice_contents}, notice_type= #{notice_type}
		where notice_key=#{notice_key}
	</update>
   <delete id="delete">
		delete from notice where notice_key=#{notice_key}
	</delete>
    <select id="read" resultType="com.example.domain.NoticeVO">
        SELECT * FROM notice WHERE notice_key = #{notice_key}
    </select>
 	  <select id="list" resultType="hashmap">
        select *
        from notice
        <where>
            <if test="key == 'notice_writer'">notice_writer like #{word}</if>
            <if test="key == 'notice_title'">notice_title like #{word}</if>
            <if test="key == 'notice_contents'">notice_contents like #{word}</if>
            <if test="key == 'notice_type' and word != '전체'">notice_type = #{word, jdbcType=INTEGER}</if>
        </where>
        order by notice_key desc
        limit #{start}, #{size}
    </select>
 <select id="total" resultType="int">
        select count(*)
        from notice
        <where>
            <if test="key == 'notice_writer'">notice_writer like #{word}</if>
            <if test="key == 'notice_title'">notice_title like #{word}</if>
            <if test="key == 'notice_contents'">notice_contents like #{word}</if>
            <if test="key == 'notice_type' and word != '전체'">notice_type = #{word, jdbcType=INTEGER}</if>
        </where>
    </select>
    <update id="updateViewcnt">
		update notice
		set notice_vcnt=notice_vcnt+1
		where notice_key=#{notice_key}
	</update>
	<select id="categoryList" resultType="hashmap">
		select * from notice 
		<if test ="notice_state===0">
			where notice_state===0
		</if>
	</select>
</mapper>
